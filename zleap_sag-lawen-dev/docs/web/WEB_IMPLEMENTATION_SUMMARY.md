# ğŸ‰ DataFlow å…¨æ ˆå®ç°å®Œæˆæ€»ç»“

## âœ… å·²å®ŒæˆåŠŸèƒ½

### 1. åç«¯ API (FastAPI)

**è·¯å¾„**: `dataflow/api/`

**æ ¸å¿ƒæ¨¡å—**:
- âœ… ä¿¡æ¯æºç®¡ç† (`/api/v1/sources`)
- âœ… å®ä½“ç»´åº¦ç®¡ç† (`/api/v1/entity-types`)
- âœ… æ–‡æ¡£ç®¡ç† (`/api/v1/documents`)
- âœ… ç»Ÿä¸€æµç¨‹ (`/api/v1/pipeline`)
- âœ… ä»»åŠ¡ç®¡ç† (`/api/v1/tasks`)

**ç»Ÿè®¡**:
- 21 ä¸ª Python æ–‡ä»¶
- 2,175+ è¡Œä»£ç 
- 5 ä¸ªè·¯ç”±æ¨¡å—
- 4 ä¸ªæœåŠ¡å±‚
- å®Œæ•´çš„å¼‚å¸¸å¤„ç†å’Œä¸­é—´ä»¶

### 2. å‰ç«¯ Web UI (Next.js 14)

**è·¯å¾„**: `web/`

**æ ¸å¿ƒé¡µé¢**:
- âœ… é¦–é¡µ (`/`)
- âœ… ä¿¡æ¯æºç®¡ç† (`/sources`)
- âœ… æ–‡æ¡£ç®¡ç† (`/documents`)
- âœ… æ™ºèƒ½æœç´¢ (`/search`)
- âœ… ä»»åŠ¡ç›‘æ§ (`/tasks`)
- âœ… ç³»ç»Ÿè®¾ç½® (`/settings`)

**æŠ€æœ¯æ ˆ**:
- Next.js 14 (App Router)
- TypeScript
- Tailwind CSS
- React Query
- Zustand
- Axios

### 3. Docker é…ç½®

**æ–‡ä»¶**:
- âœ… `docker-compose.yml` - ç”Ÿäº§ç¯å¢ƒï¼ˆå…¨æ ˆï¼‰
- âœ… `docker-compose.dev.yml` - å¼€å‘ç¯å¢ƒï¼ˆåŸºç¡€æœåŠ¡ï¼‰
- âœ… `Dockerfile.api` - åç«¯é•œåƒ
- âœ… `web/Dockerfile` - å‰ç«¯é•œåƒ
- âœ… `.dockerignore` - Docker å¿½ç•¥æ–‡ä»¶

### 4. å¯åŠ¨è„šæœ¬

**è·¯å¾„**: `scripts/`

- âœ… `start_all.sh` - ä¸€é”®å¯åŠ¨å…¨æ ˆ
- âœ… `start_dev.sh` - å¯åŠ¨å¼€å‘ç¯å¢ƒ
- âœ… `start_api.py` - å¯åŠ¨åç«¯æœåŠ¡

---

## ğŸ“Š é¡¹ç›®ç»Ÿè®¡

```
dataflow/ (é¡¹ç›®æ ¹ç›®å½•)
â”œâ”€â”€ dataflow/              # åç«¯ä»£ç 
â”‚   â”œâ”€â”€ api/               # 21 ä¸ª Python æ–‡ä»¶
â”‚   â”œâ”€â”€ core/              # æ ¸å¿ƒæ¨¡å—
â”‚   â””â”€â”€ modules/           # ä¸šåŠ¡æ¨¡å—
â”‚
â”œâ”€â”€ web/                   # å‰ç«¯ä»£ç 
â”‚   â”œâ”€â”€ app/               # 6 ä¸ªé¡µé¢
â”‚   â”œâ”€â”€ components/        # UI ç»„ä»¶
â”‚   â”œâ”€â”€ lib/               # API å®¢æˆ·ç«¯
â”‚   â””â”€â”€ store/             # çŠ¶æ€ç®¡ç†
â”‚
â”œâ”€â”€ Docker é…ç½®            # 4 ä¸ªæ–‡ä»¶
â”œâ”€â”€ å¯åŠ¨è„šæœ¬               # 3 ä¸ªè„šæœ¬
â””â”€â”€ æ–‡æ¡£                   # å®Œæ•´æ–‡æ¡£
```

---

## ğŸš€ å¿«é€Ÿå¯åŠ¨

### ğŸ”¥ æœ€å¿«æ–¹å¼ï¼ˆDocker å…¨æ ˆï¼‰

```bash
# 1. é…ç½®ç¯å¢ƒ
cp .env.example .env
# ç¼–è¾‘ .env è®¾ç½® LLM_API_KEY

# 2. ä¸€é”®å¯åŠ¨
./scripts/start_all.sh

# 3. åˆå§‹åŒ–æ•°æ®åº“
docker-compose exec api python scripts/init_database.py
docker-compose exec api python scripts/init_es_indices.py

# 4. è®¿é—®åº”ç”¨
open http://localhost:3000
```

### ğŸ”§ å¼€å‘æ¨¡å¼

```bash
# 1. å¯åŠ¨åŸºç¡€æœåŠ¡
./scripts/start_dev.sh

# 2. å¯åŠ¨åç«¯ï¼ˆç»ˆç«¯ 1ï¼‰
python -m dataflow.api.main

# 3. å¯åŠ¨å‰ç«¯ï¼ˆç»ˆç«¯ 2ï¼‰
cd web && npm run dev
```

---

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½å±•ç¤º

### 1. ä¿¡æ¯æºç®¡ç†
- åˆ›å»º/ç¼–è¾‘/åˆ é™¤ä¿¡æ¯æº
- æŸ¥çœ‹ä¿¡æ¯æºåˆ—è¡¨
- ä¿¡æ¯æºéš”ç¦»

### 2. æ–‡æ¡£å¤„ç†
- æ‹–æ‹½ä¸Šä¼ æ–‡æ¡£
- æ‰¹é‡ä¸Šä¼ æ”¯æŒ
- è‡ªåŠ¨ Load + Extract
- æ–‡æ¡£çŠ¶æ€ç›‘æ§

### 3. æ™ºèƒ½æœç´¢
- ä¸‰ç§æœç´¢æ¨¡å¼ï¼ˆLLM/RAG/SAGï¼‰
- å®æ—¶æœç´¢ç»“æœ
- æœç´¢å†å²

### 4. ä»»åŠ¡ç›‘æ§
- å®æ—¶ä»»åŠ¡çŠ¶æ€
- è¿›åº¦æ¡æ˜¾ç¤º
- è‡ªåŠ¨åˆ·æ–°

### 5. ç³»ç»Ÿè®¾ç½®
- æŸ¥çœ‹é»˜è®¤å®ä½“ç±»å‹
- API é…ç½®ä¿¡æ¯
- è‡ªå®šä¹‰å®ä½“ç®¡ç†

---

## ğŸŒ è®¿é—®åœ°å€

å¯åŠ¨åè®¿é—®ä»¥ä¸‹åœ°å€ï¼š

| æœåŠ¡             | URL                             | è¯´æ˜         |
| ---------------- | ------------------------------- | ------------ |
| **Web UI**       | http://localhost:3000           | å‰ç«¯ç•Œé¢     |
| **API**          | http://localhost:8000           | åç«¯ API     |
| **Swagger UI**   | http://localhost:8000/api/docs  | API äº¤äº’æ–‡æ¡£ |
| **ReDoc**        | http://localhost:8000/api/redoc | API ç¾åŒ–æ–‡æ¡£ |
| **Health Check** | http://localhost:8000/health    | å¥åº·æ£€æŸ¥     |

---

## ğŸ“– ä½¿ç”¨æµç¨‹

### å®Œæ•´å·¥ä½œæµç¤ºä¾‹

1. **åˆ›å»ºä¿¡æ¯æº**
   - è®¿é—®ï¼šhttp://localhost:3000/sources
   - ç‚¹å‡»"åˆ›å»ºä¿¡æ¯æº"
   - è¾“å…¥åç§°å’Œæè¿°
   - è®°å½• source_config_id

2. **ä¸Šä¼ æ–‡æ¡£**
   - è®¿é—®ï¼šhttp://localhost:3000/documents
   - è¾“å…¥ source_config_id
   - æ‹–æ‹½æ–‡ä»¶æˆ–ç‚¹å‡»ä¸Šä¼ 
   - è‡ªåŠ¨æ‰§è¡Œ Load + Extract

3. **æŸ¥çœ‹ä»»åŠ¡**
   - è®¿é—®ï¼šhttp://localhost:3000/tasks
   - å®æ—¶æŸ¥çœ‹å¤„ç†è¿›åº¦
   - ç­‰å¾…ä»»åŠ¡å®Œæˆ

4. **æ‰§è¡Œæœç´¢**
   - è®¿é—®ï¼šhttp://localhost:3000/search
   - è¾“å…¥ source_config_id å’ŒæŸ¥è¯¢
   - é€‰æ‹©æœç´¢æ¨¡å¼ï¼ˆæ¨è SAGï¼‰
   - æŸ¥çœ‹æœç´¢ç»“æœ

---

## ğŸ”§ é…ç½®è¯´æ˜

### åç«¯é…ç½® (`.env`)

```bash
# LLM APIï¼ˆå¿…å¡«ï¼‰
LLM_API_KEY=sk-your-api-key
LLM_MODEL=sophnet/Qwen3-30B-A3B-Thinking-2507
LLM_BASE_URL=https://api.openai.com/v1

# æ•°æ®åº“ï¼ˆDocker è‡ªåŠ¨é…ç½®ï¼‰
MYSQL_HOST=mysql
MYSQL_PASSWORD=dataflow_pass

# API é…ç½®
API_PORT=8000
API_WORKERS=4
DEBUG=false
```

### å‰ç«¯é…ç½® (`web/.env.local`)

```bash
# API åœ°å€
NEXT_PUBLIC_API_URL=http://localhost:8000
```

---

## ğŸ—ï¸ æ¶æ„æ¦‚è§ˆ

### å…¨æ ˆæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Web UI (Next.js)            â”‚
â”‚  - React ç»„ä»¶                        â”‚
â”‚  - Tailwind CSS                     â”‚
â”‚  - React Query                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚ HTTP/REST
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       API Server (FastAPI)          â”‚
â”‚  - ä¿¡æ¯æºç®¡ç†                        â”‚
â”‚  - æ–‡æ¡£å¤„ç†                          â”‚
â”‚  - æœç´¢å¼•æ“                          â”‚
â”‚  - ä»»åŠ¡ç®¡ç†                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     DataFlow Engine (Python)        â”‚
â”‚  - Load   (æ–‡æ¡£åŠ è½½)                â”‚
â”‚  - Extract (äº‹é¡¹æå–)               â”‚
â”‚  - Search  (æ™ºèƒ½æ£€ç´¢)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        Storage Layer                â”‚
â”‚  MySQL | Elasticsearch | Redis      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¨ UI ç‰¹æ€§

- âœ… å“åº”å¼è®¾è®¡ï¼ˆç§»åŠ¨ç«¯å‹å¥½ï¼‰
- âœ… ç°ä»£åŒ– UIï¼ˆTailwind CSSï¼‰
- âœ… å®æ—¶æ›´æ–°ï¼ˆReact Queryï¼‰
- âœ… æ‹–æ‹½ä¸Šä¼ ï¼ˆReact Dropzoneï¼‰
- âœ… å›¾æ ‡ç³»ç»Ÿï¼ˆLucide Reactï¼‰
- âœ… åŠ è½½çŠ¶æ€
- âœ… é”™è¯¯å¤„ç†

---

## ğŸ”’ å®‰å…¨æç¤º

### ç”Ÿäº§ç¯å¢ƒå¿…åš

1. **é…ç½® CORS**
   ```python
   # dataflow/api/main.py
   allow_origins=["https://your-domain.com"]
   ```

2. **æ·»åŠ è®¤è¯**
   - å®ç° JWT Token
   - API Key éªŒè¯
   - ç”¨æˆ·æƒé™æ§åˆ¶

3. **HTTPS**
   - é…ç½® SSL è¯ä¹¦
   - ä½¿ç”¨åå‘ä»£ç†ï¼ˆNginxï¼‰

4. **ç¯å¢ƒå˜é‡**
   - ä¸è¦æäº¤ `.env` åˆ° Git
   - ä½¿ç”¨å¯†é’¥ç®¡ç†æœåŠ¡

---

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### å·²å®ç°

- âœ… API å“åº”ç¼“å­˜
- âœ… æ•°æ®åº“è¿æ¥æ± 
- âœ… React Query ç¼“å­˜
- âœ… Next.js é™æ€ä¼˜åŒ–
- âœ… å›¾ç‰‡ä¼˜åŒ–

### å»ºè®®ä¼˜åŒ–

- [ ] CDN åŠ é€Ÿ
- [ ] Redis ç¼“å­˜å±‚
- [ ] æ•°æ®åº“ç´¢å¼•ä¼˜åŒ–
- [ ] å‰ç«¯ä»£ç åˆ†å‰²
- [ ] SSR/ISR ä¼˜åŒ–

---

## ğŸ“ å­¦ä¹ èµ„æº

### åç«¯
- FastAPI æ–‡æ¡£: https://fastapi.tiangolo.com
- SQLAlchemy æ–‡æ¡£: https://docs.sqlalchemy.org

### å‰ç«¯
- Next.js æ–‡æ¡£: https://nextjs.org/docs
- React Query æ–‡æ¡£: https://tanstack.com/query/latest
- Tailwind CSS: https://tailwindcss.com

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

- **æ–‡æ¡£**: [docs/README.md](docs/README.md)
- **GitHub**: https://github.com/zleap-team/dataflow
- **Email**: contact@zleap.ai

---

## ğŸŠ æ­å–œï¼

**DataFlow å…¨æ ˆåº”ç”¨å·²å®Œæ•´å®ç°ï¼**

ä½ ç°åœ¨æ‹¥æœ‰ï¼š
- âœ… å¼ºå¤§çš„åç«¯ API
- âœ… ç°ä»£åŒ–çš„ Web UI
- âœ… å®Œæ•´çš„ Docker é…ç½®
- âœ… ä¸€é”®å¯åŠ¨è„šæœ¬
- âœ… å®Œå–„çš„æ–‡æ¡£

**Ready for Production! ğŸš€**

---

**Made with â¤ï¸ by Zleap Team**

